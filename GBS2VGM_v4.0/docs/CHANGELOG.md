# GBS2VGM 更新日志

## v4.0 (2026-02-05)

### 🎉 重大更新

#### 新增功能
- ✨ **智能循环点检测** - 集成vgmlpfnd工具，自动检测VGM文件的最佳循环点
- ✨ **批量VGM修剪** - 新增vgm_trim工具，根据循环点自动修剪VGM文件
- ✨ **多文件夹批量处理** - 支持同时处理多个游戏目录
- ✨ **详细日志系统** - 实时进度追踪和详细的处理日志
- ✨ **智能文件合并** - 自动将修剪后的文件覆盖回原目录，保留无法修剪的文件

#### 处理脚本
- 📜 `process_vgm_with_log.sh` - 带详细日志的单线程处理脚本
- 📜 `process_vgm_parallel.sh` - 多线程并行处理脚本（实验性）
- 📜 `auto_trim_dq3.sh` - Dragon Quest III 专用处理脚本
- 📜 `auto_trim_dqm1.sh` - Dragon Quest Monsters 1 专用处理脚本
- 📜 `auto_trim_dqm2.sh` - Dragon Quest Monsters 2 专用处理脚本
- 📜 `auto_trim_tales.sh` - Tales of Phantasia 专用处理脚本

#### 处理效果
实际测试结果显示：
- Dragon Quest III: 64个文件，成功修剪8个，平均压缩率83%
- Dragon Quest Monsters 1: 28个文件，成功修剪15个，平均压缩率82%
- Dragon Quest Monsters 2: 31个文件，成功修剪10个，平均压缩率80%
- Tales of Phantasia: 39个文件，成功修剪29个，平均压缩率78%

#### 改进
- 🔧 优化循环点选择算法 - 优先选择标记为"!"的最佳循环点
- 🔧 改进文件大小统计 - 显示修剪前后的文件大小和压缩率
- 🔧 增强错误处理 - 更好的错误提示和异常处理
- 📚 完善文档 - 新增详细的使用说明和示例

#### Bug修复
- 🐛 修复文件路径包含空格时的处理问题
- 🐛 修复临时文件清理问题
- 🐛 修复进度文件更新延迟问题

---

## v3.0 (2026-02-04)

### 重构与优化

#### 核心改进
- ✨ 完全重构批量转换工具
- ✨ 改进M3U播放列表解析
- ✨ 优化VGM文件写入性能

#### Bug修复
- 🐛 修复内存泄漏问题
- 🐛 修复长文件名处理问题
- 🐛 修复子曲目索引错误

#### 文档
- 📚 更新技术文档
- 📚 添加开发指南

---

## v2.2 (2026-02-03)

### 初始发布

#### 基础功能
- ✨ GBS到VGM批量转换
- ✨ M3U播放列表支持
- ✨ 多子曲目处理
- ✨ 可配置循环次数

#### 支持的游戏
- Dragon Quest I & II
- Dragon Quest III

#### 工具
- `gbs2vgm_batch.exe` - 批量转换工具
- `gbs2vgm_final.sh` - 转换脚本

---

## 未来计划

### v4.1 (计划中)
- [ ] 优化多线程处理性能
- [ ] 添加GUI界面
- [ ] 支持更多音频格式
- [ ] 添加音频质量分析工具

### v5.0 (规划中)
- [ ] 完整的音频编辑功能
- [ ] 批量标签编辑
- [ ] 音频格式转换
- [ ] 云端处理支持

---

**维护者**: Claude Sonnet 4.5 & Denjhang
**项目地址**: https://github.com/denjhang/gbs2vgm
**许可证**: GNU GPL v1 or later
