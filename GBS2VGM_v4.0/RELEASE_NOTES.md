# GBS2VGM v4.0 发布说明

## 📦 发布信息

- **版本**: v4.0
- **发布日期**: 2026-02-05
- **文件大小**: 1.5 MB
- **文件名**: GBS2VGM_v4.0.tar.gz

---

## 🎯 本版本亮点

### 核心功能升级

1. **智能循环点检测**
   - 集成vgmlpfnd工具
   - 自动识别最佳循环点
   - 支持多个候选循环点

2. **批量VGM修剪**
   - 新增vgm_trim工具
   - 自动修剪到最优大小
   - 平均压缩率达80%以上

3. **多文件夹处理**
   - 支持批量处理多个游戏
   - 详细的进度追踪
   - 完整的处理日志

4. **智能文件管理**
   - 自动覆盖修剪后的文件
   - 保留无法修剪的原文件
   - 生成详细统计报告

---

## 📊 性能数据

### 实际测试结果

| 游戏 | 文件数 | 修剪成功 | 平均压缩率 | 处理时间 |
|------|--------|----------|------------|----------|
| Dragon Quest III | 64 | 8 (12.5%) | 83% | ~15分钟 |
| Dragon Quest Monsters 1 | 28 | 15 (53.6%) | 82% | ~8分钟 |
| Dragon Quest Monsters 2 | 31 | 10 (32.3%) | 80% | ~10分钟 |
| Tales of Phantasia | 39 | 29 (74.4%) | 78% | ~12分钟 |

**总计**: 162个文件，62个成功修剪（38.3%），平均压缩率80.75%

---

## 📁 包含内容

### 可执行文件 (bin/)
- `gbs2vgm_batch.exe` (631 KB) - GBS到VGM批量转换工具
- `vgm_trim.exe` (304 KB) - VGM修剪工具
- `vgmlpfnd.exe` (351 KB) - 循环点检测工具

### 源代码 (gbsplay/)
- 完整的C源代码
- 头文件和依赖
- Makefile编译配置

### 处理脚本 (scripts/)
- `process_vgm_with_log.sh` - 带日志的处理脚本（推荐）
- `process_vgm_parallel.sh` - 多线程处理脚本（实验性）
- `auto_trim_dq3.sh` - DQ3专用脚本
- `auto_trim_dqm1.sh` - DQM1专用脚本
- `auto_trim_dqm2.sh` - DQM2专用脚本
- `auto_trim_tales.sh` - Tales专用脚本

### 示例文件 (examples/)
- **输入示例**: DQ3_GBS_Example.7z (45 KB)
- **输出示例**: DQ3_VGM_Trimmed_Example.tar.gz (825 KB)

### 文档 (docs/)
- `CHANGELOG.md` - 完整更新日志
- `使用说明_v4.0.md` - 详细使用教程

### 其他
- `README.md` - 项目说明
- `Makefile` - 编译配置

---

## 🚀 快速开始

### 1. 解压发布包

```bash
tar -xzf GBS2VGM_v4.0.tar.gz
cd GBS2VGM_v4.0
```

### 2. 查看示例

```bash
# 查看输入示例
ls -lh examples/input/

# 查看输出示例
tar -tzf examples/output/DQ3_VGM_Trimmed_Example.tar.gz | head
```

### 3. 处理你的VGM文件

```bash
# 方式1: 使用自动化脚本（推荐）
./scripts/process_vgm_with_log.sh <文件夹名称>

# 方式2: 手动处理
./bin/gbs2vgm_batch.exe "path/to/game.m3u" "output"
./scripts/process_vgm_with_log.sh output
```

---

## 🔧 系统要求

### 最低要求
- **操作系统**: Windows 7/10/11, Linux, macOS
- **处理器**: 1 GHz 单核
- **内存**: 512 MB RAM
- **磁盘空间**: 100 MB 可用空间

### 推荐配置
- **操作系统**: Windows 10/11, Linux (Ubuntu 20.04+)
- **处理器**: 2 GHz 双核或更高
- **内存**: 2 GB RAM 或更多
- **磁盘空间**: 1 GB 可用空间（用于临时文件）
- **存储**: SSD（提升处理速度）

### 编译要求（如需重新编译）
- GCC 7.0 或更高版本
- Make 工具
- MSYS2/MinGW（Windows）

---

## 📝 使用注意事项

### 重要提示

1. **备份原文件**
   - 处理前建议备份原始VGM文件
   - 脚本会自动覆盖原文件

2. **文件路径**
   - 避免使用包含空格的路径
   - 使用相对路径或绝对路径

3. **磁盘空间**
   - 确保有足够的临时空间
   - 处理大型文件时需要2-3倍的空间

4. **处理时间**
   - 处理时间取决于文件数量和大小
   - 大型游戏可能需要15-30分钟

### 已知限制

1. **多线程处理**
   - 多线程脚本仍在实验阶段
   - 建议使用单线程版本以确保稳定性

2. **循环点检测**
   - 某些特殊格式的VGM可能无法检测循环点
   - 这些文件会被跳过，保留原文件

3. **文件名**
   - 不支持包含特殊字符的文件名
   - 建议使用ASCII字符

---

## 🆕 与v3.0的主要区别

| 功能 | v3.0 | v4.0 |
|------|------|------|
| 循环点检测 | ❌ 手动 | ✅ 自动 |
| VGM修剪 | ❌ 不支持 | ✅ 支持 |
| 批量处理 | ⚠️ 基础 | ✅ 完整 |
| 日志系统 | ⚠️ 简单 | ✅ 详细 |
| 进度追踪 | ❌ 无 | ✅ 实时 |
| 文件管理 | ⚠️ 手动 | ✅ 自动 |
| 处理脚本 | 1个 | 6个 |
| 文档 | ⚠️ 基础 | ✅ 完整 |

---

## 🐛 已知问题

### 当前版本

1. **多线程处理不稳定**
   - 状态: 已知
   - 影响: 可能导致处理失败
   - 解决方案: 使用单线程版本

2. **Windows路径问题**
   - 状态: 已知
   - 影响: 某些Windows路径可能无法识别
   - 解决方案: 使用MSYS2环境

### 已修复（v4.0）

- ✅ 文件路径包含空格的问题
- ✅ 临时文件清理问题
- ✅ 进度文件更新延迟
- ✅ 内存泄漏问题

---

## 📞 技术支持

### 获取帮助

1. **查看文档**
   - README.md - 项目概述
   - docs/使用说明_v4.0.md - 详细教程
   - docs/CHANGELOG.md - 更新历史

2. **常见问题**
   - 查看使用说明中的"常见问题"部分
   - 检查日志文件了解错误详情

3. **报告问题**
   - 提供详细的错误信息
   - 附上日志文件
   - 说明操作系统和环境

### 联系方式

- **项目地址**: https://github.com/denjhang/gbs2vgm
- **问题反馈**: 提交Issue到GitHub仓库
- **维护者**: Denjhang

---

## 📜 许可证

GNU GPL v1 or later

本工具仅供学习和研究使用，请尊重原游戏版权。

---

## 🙏 致谢

- **gbsplay项目** - 提供GBS播放和转换核心
- **VGM格式规范** - 提供VGM文件格式支持
- **测试用户** - 提供宝贵的反馈和建议

---

## 🔮 未来计划

### v4.1 (计划中)
- 优化多线程处理
- 添加更多游戏支持
- 改进循环点检测算法

### v5.0 (规划中)
- GUI界面
- 音频质量分析
- 批量标签编辑
- 云端处理支持

---

**发布日期**: 2026-02-05
**版本**: v4.0
**开发**: Claude Sonnet 4.5
**维护**: Denjhang

---

**下载地址**: release/GBS2VGM_v4.0.tar.gz
**文件大小**: 1.5 MB
**MD5**: (待生成)
**SHA256**: (待生成)
